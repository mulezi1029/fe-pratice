<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<style>
			* {
				margin: 0;
				padding: 0;
			}
			.container {
				padding: 20px;
				background-color: lightblue;
				display: flex;
				align-items: center;
			}
			.left {
				padding-right: 10px;
				margin-left: 20px;
				border-right: 2px solid #ccc;
			}
			.right {
				margin-left: 20px;
				height: 100%;
				height: 30px;
				line-height: 30px;
				overflow-y: hidden;
				/* scrollbar-width: none; */
			}
			ul {
				list-style: none;
			}
		</style>
	</head>
	<body>
		<div class="container">
			<div class="left title">最新公告</div>
			<div class="right content">
				<ul class="list">
					<li class="item">1.Lorem ipsum dolor sit amet.</li>
					<li class="item">2.Vero aliquam rerum commodi voluptatum?</li>
					<li class="item">3.Aliquam ratione hic assumenda aut!</li>
					<li class="item">4.Ipsum recusandae quia magni iste.</li>
					<li class="item">5.Labore quibusdam ipsa aperiam voluptates.</li>
				</ul>
			</div>
		</div>

		<script>
			const right = document.querySelector('.right')
			const list = document.querySelector('.list')
			const items = document.querySelectorAll('.item')
			const itemHeight = items[0].offsetHeight
			let index = 0
      let timerId = null
			// 初始化：为了实现无缝滚动，需要在最后一个元素后面再添加一个第一个元素
			function init() {
				const cloneFirst = items[0].cloneNode(true)
				list.appendChild(cloneFirst)
			  timerId =	setInterval(beginScroll, 2000) // 开启定时器，每隔2s滚动一次
			}
			init()

			function beginScroll() {
				// right.scrollTo({
				//   top: index * itemHeight,
				//   behavior: 'smooth'
				// });  // 不能精细的控制滚动速度，显得没那么平滑。所以使用计算插值的方式

				let from = index * itemHeight
				index++
				let to = index * itemHeight

				// 让 from 逐渐变成 to（每隔一段时间，变化一点）：比如从0-->30，变化总时间设置为500ms，变化间隔时间设置为10ms
				let duration = 500 // 变化的总时间
				let interval = 10 // 变化的间隔时间
				let frames = duration / interval // 变化的总帧数（次数）
				let dis = (to - from) / frames // 每一帧变化的距离

				let current = from // 当前的位置

        // 开启定时器，每隔一段时间，让 current 变化一点
				let timer = setInterval(() => {
					current += dis
					if (current >= to) {
						clearInterval(timer)
					}
					right.scrollTop = current
				}, interval)
        
        // 当滚动到最后一个元素时，立即回到第一个元素
        if (index === items.length) {
          index = 0
          right.scrollTop = 0
        }
			}

      right.addEventListener('mouseover', () => {
        clearInterval(timerId)
      })

      right.addEventListener('mouseout', () => {
        timerId = setInterval(beginScroll, 2000)
      })

		</script>
	</body>
</html>
