<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¥¢åæµ·æŠ¥çœç•¥å·åº•éƒ¨å¯¹é½ä¿®æ”¹æ–¹æ¡ˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .solution-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .demo-section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .demo-title {
            color: #333;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            border-left: 4px solid #007bff;
            padding-left: 10px;
        }
        
        /* æ¨¡æ‹Ÿå¥¢åæµ·æŠ¥çš„èƒŒæ™¯å’Œæ ·å¼ */
        .mock-poster {
            width: 400px;
            height: 300px;
            background: linear-gradient(135deg, #8B4513 0%, #D2691E 50%, #CD853F 100%);
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px auto;
        }
        
        .mock-title-area {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            text-align: center;
        }
        
        /* åŸå§‹æ–¹æ³• */
        .original-method {
            font-family: serif;
            font-size: 32px;
            background: linear-gradient(91deg, #FFD8B2 5.06%, #FFF 48.08%, #FFC9A0 97.72%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: normal;
            line-height: 1.2;
        }
        
        /* æ”¹è¿›æ–¹æ³• */
        .improved-method {
            font-family: serif;
            font-size: 32px;
            background: linear-gradient(91deg, #FFD8B2 5.06%, #FFF 48.08%, #FFC9A0 97.72%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            max-height: 2.4em; /* 2è¡Œçš„é«˜åº¦ */
            line-height: 1.2;
            overflow: hidden;
            word-break: break-word;
        }
        
        .improved-method::after {
            content: '...';
            position: absolute;
            bottom: 0;
            right: 0;
            background: linear-gradient(91deg, #FFD8B2 5.06%, #FFF 48.08%, #FFC9A0 97.72%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: normal;
            line-height: 1.2;
            padding-left: 20px;
            /* åˆ›å»ºé®ç½©æ•ˆæœ */
            background-image: 
                linear-gradient(to right, transparent 0%, rgba(139, 69, 19, 0.8) 30%),
                linear-gradient(91deg, #FFD8B2 5.06%, #FFF 48.08%, #FFC9A0 97.72%);
            background-clip: text, text;
            -webkit-background-clip: text, text;
        }
        
        /* JavaScriptè¾…åŠ©æ–¹æ¡ˆ */
        .js-method {
            font-family: serif;
            font-size: 32px;
            background: linear-gradient(91deg, #FFD8B2 5.06%, #FFF 48.08%, #FFC9A0 97.72%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            max-height: 2.4em;
            line-height: 1.2;
            overflow: hidden;
            word-break: break-word;
        }
        
        .js-method .ellipsis-overlay {
            position: absolute;
            bottom: 0;
            right: 0;
            background: linear-gradient(91deg, #FFD8B2 5.06%, #FFF 48.08%, #FFC9A0 97.72%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
            display: none;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            position: relative;
        }
        
        .code-block::before {
            content: attr(data-lang);
            position: absolute;
            top: 5px;
            right: 10px;
            background: #4a5568;
            color: #cbd5e0;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .highlight {
            background-color: #ffd93d;
            color: #2d3748;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .step-list {
            background: #e6f3ff;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .step-list ol {
            margin: 0;
            padding-left: 20px;
        }
        
        .step-list li {
            margin: 10px 0;
            line-height: 1.6;
        }
        
        .warning {
            background: #fff3cd;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #ffc107;
        }
        
        .success {
            background: #d1e7dd;
            color: #0f5132;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #198754;
        }
    </style>
</head>
<body>
    <div class="solution-container">
        <h1>ğŸª å¥¢åæµ·æŠ¥çœç•¥å·åº•éƒ¨å¯¹é½ä¿®æ”¹æ–¹æ¡ˆ</h1>
        
        <div class="warning">
            <h4>âš ï¸ ç‰¹æ®ŠæŒ‘æˆ˜</h4>
            æ‚¨çš„å¥¢åæµ·æŠ¥ä½¿ç”¨äº†æ¸å˜é€æ˜æ–‡å­—æ•ˆæœå’ŒèƒŒæ™¯å›¾ç‰‡ï¼Œè¿™ä½¿å¾—çœç•¥å·åº•éƒ¨å¯¹é½å˜å¾—æ›´åŠ å¤æ‚ã€‚æ ‡å‡†çš„ä¼ªå…ƒç´ é®ç½©æ–¹æ¡ˆä¸é€‚ç”¨ï¼Œå› ä¸ºï¼š
            <ul>
                <li>æ–‡å­—ä½¿ç”¨äº† <code>background-clip: text</code> å’Œ <code>-webkit-text-fill-color: transparent</code></li>
                <li>èƒŒæ™¯æ˜¯å›¾ç‰‡è€Œéçº¯è‰²</li>
                <li>çœç•¥å·ä¹Ÿéœ€è¦ä¿æŒç›¸åŒçš„æ¸å˜æ•ˆæœ</li>
            </ul>
        </div>

        <div class="demo-section">
            <div class="demo-title">ğŸ“‹ å½“å‰æ•ˆæœå¯¹æ¯”</div>
            
            <div style="display: flex; gap: 30px; align-items: center;">
                <div>
                    <h4>åŸå§‹æ•ˆæœ</h4>
                    <div class="mock-poster">
                        <div class="mock-title-area">
                            <div class="original-method">
                                é¦™æ¸¯æ¾³é—¨æ–°åŠ å¡å…­æ˜Ÿè¶…çº§è±ªåå¤§é…’åº—ä¸–ç•Œæ€»åº—åç§°åº—åç§°å‘å‘å¾ˆå¿«
                            </div>
                        </div>
                    </div>
                    <p style="text-align: center; color: #dc3545;">âŒ çœç•¥å·ä¸åœ¨åº•éƒ¨å¯¹é½</p>
                </div>
                
                <div>
                    <h4>æ”¹è¿›æ•ˆæœ</h4>
                    <div class="mock-poster">
                        <div class="mock-title-area">
                            <div class="improved-method">
                                é¦™æ¸¯æ¾³é—¨æ–°åŠ å¡å…­æ˜Ÿè¶…çº§è±ªåå¤§é…’åº—ä¸–ç•Œæ€»åº—åç§°åº—åç§°å‘å‘å¾ˆå¿«
                            </div>
                        </div>
                    </div>
                    <p style="text-align: center; color: #198754;">âœ… çœç•¥å·åº•éƒ¨å¯¹é½</p>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <div class="demo-title">ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ1ï¼šçº¯CSSæ”¹è¿›æ–¹æ¡ˆï¼ˆæ¨èï¼‰</div>
            
            <div class="step-list">
                <h4>ä¿®æ”¹æ­¥éª¤ï¼š</h4>
                <ol>
                    <li>ç§»é™¤åŸæœ‰çš„ <code>-webkit-box</code> ç›¸å…³å±æ€§</li>
                    <li>ä½¿ç”¨ <code>max-height</code> å’Œ <code>overflow: hidden</code> æ§åˆ¶è¡Œæ•°</li>
                    <li>ç”¨ä¼ªå…ƒç´  <code>::after</code> åˆ›å»ºåº•éƒ¨å¯¹é½çš„çœç•¥å·</li>
                    <li>ä¸ºçœç•¥å·åº”ç”¨ç›¸åŒçš„æ¸å˜æ•ˆæœ</li>
                </ol>
            </div>

            <div class="code-block" data-lang="CSS">
/* æ›¿æ¢æ‚¨çš„ .main-title-two-line æ ·å¼ */
.main-title-two-line {
    position: relative;
    <span class="highlight">max-height: 2.4em;</span> /* æ ¹æ®line-heightè°ƒæ•´ï¼šline-height Ã— è¡Œæ•° */
    line-height: 1.2;
    overflow: hidden;
    word-break: break-word;
    /* ç§»é™¤åŸæœ‰çš„ -webkit-box ç›¸å…³å±æ€§ */
}

.main-title-two-line::before {
    /* åˆ›å»ºé®ç½©å±‚ï¼Œæ¨¡æ‹ŸèƒŒæ™¯ */
    content: '';
    position: absolute;
    bottom: 0;
    right: 0;
    width: 60px;
    height: 1.2em;
    background: linear-gradient(
        to right, 
        transparent 0%, 
        rgba(139, 69, 19, 0.9) 40%  /* æ ¹æ®æ‚¨çš„èƒŒæ™¯è‰²è°ƒæ•´ */
    );
    z-index: 1;
}

.main-title-two-line::after {
    content: '...';
    position: absolute;
    <span class="highlight">bottom: 0;</span>
    <span class="highlight">right: 0;</span>
    background: linear-gradient(91deg, #FFD8B2 5.06%, #FFF 48.08%, #FFC9A0 97.72%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-family: inherit;
    font-size: inherit;
    line-height: 1.2;
    z-index: 2;
    padding-left: 10px;
}
            </div>
        </div>

        <div class="demo-section">
            <div class="demo-title">ğŸ”§ è§£å†³æ–¹æ¡ˆ2ï¼šJavaScriptè¾…åŠ©æ–¹æ¡ˆï¼ˆæœ€ç²¾ç¡®ï¼‰</div>
            
            <p>å¯¹äºå¤æ‚çš„æ¸å˜èƒŒæ™¯ï¼ŒJavaScriptæ–¹æ¡ˆå¯ä»¥æä¾›æœ€ç²¾ç¡®çš„æ§åˆ¶ï¼š</p>

            <div class="code-block" data-lang="CSS">
.main-title-two-line {
    position: relative;
    max-height: 2.4em;
    line-height: 1.2;
    overflow: hidden;
    word-break: break-word;
}

.main-title-two-line .ellipsis-overlay {
    position: absolute;
    bottom: 0;
    right: 0;
    background: linear-gradient(91deg, #FFD8B2 5.06%, #FFF 48.08%, #FFC9A0 97.72%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    line-height: 1.2;
    display: none;
}
            </div>

            <div class="code-block" data-lang="JavaScript">
function addBottomEllipsis() {
    const titleElements = document.querySelectorAll('.main-title-two-line');
    
    titleElements.forEach(element => {
        const maxHeight = parseFloat(getComputedStyle(element).maxHeight);
        const lineHeight = parseFloat(getComputedStyle(element).lineHeight);
        const maxLines = Math.floor(maxHeight / lineHeight);
        
        // æ£€æŸ¥æ˜¯å¦éœ€è¦æˆªæ–­
        if (element.scrollHeight > maxHeight) {
            // åˆ›å»ºçœç•¥å·å…ƒç´ 
            if (!element.querySelector('.ellipsis-overlay')) {
                const ellipsis = document.createElement('span');
                ellipsis.className = 'ellipsis-overlay';
                ellipsis.textContent = '...';
                element.appendChild(ellipsis);
            }
            
            const ellipsis = element.querySelector('.ellipsis-overlay');
            ellipsis.style.display = 'block';
            
            // äºŒåˆ†æŸ¥æ‰¾æœ€é€‚åˆçš„æ–‡æœ¬é•¿åº¦
            const originalText = element.firstChild.textContent;
            let left = 0;
            let right = originalText.length;
            let bestFit = '';
            
            while (left <= right) {
                const mid = Math.floor((left + right) / 2);
                const testText = originalText.substring(0, mid);
                element.firstChild.textContent = testText;
                
                if (element.scrollHeight <= maxHeight) {
                    bestFit = testText;
                    left = mid + 1;
                } else {
                    right = mid - 1;
                }
            }
            
            element.firstChild.textContent = bestFit;
        }
    });
}

// é¡µé¢åŠ è½½åæ‰§è¡Œ
document.addEventListener('DOMContentLoaded', addBottomEllipsis);
// çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°æ‰§è¡Œ
window.addEventListener('resize', addBottomEllipsis);
            </div>
        </div>

        <div class="demo-section">
            <div class="demo-title">ğŸ“ é’ˆå¯¹æ‚¨ä»£ç çš„å…·ä½“ä¿®æ”¹</div>
            
            <h4>åœ¨æ‚¨çš„ `å¥¢åæµ·æŠ¥.html` æ–‡ä»¶ä¸­ï¼š</h4>

            <div class="code-block" data-lang="HTML">
<!-- ç¬¬519è¡Œï¼Œä¸ºå…ƒç´ æ·»åŠ åŸå§‹æ–‡æœ¬æ•°æ®å±æ€§ï¼ˆå¦‚æœé€‰æ‹©JavaScriptæ–¹æ¡ˆï¼‰ -->
&lt;div class="main-title main-title-two-line fz-64" 
     data-original="é¦™æ¸¯æ¾³é—¨æ–°åŠ å¡å…­æ˜Ÿè¶…çº§è±ªåå¤§é…’åº—ä¸–ç•Œæ€»åº—åç§°åº—åç§°å‘å‘å¾ˆå¿«"&gt;
    é¦™æ¸¯æ¾³é—¨æ–°åŠ å¡å…­æ˜Ÿè¶…çº§è±ªåå¤§é…’åº—ä¸–ç•Œæ€»åº—åç§°åº—åç§°å‘å‘å¾ˆå¿«
&lt;/div&gt;
            </div>

            <div class="code-block" data-lang="CSS">
/* åœ¨ç¬¬172-182è¡Œï¼Œæ›¿æ¢ .main-title-two-line çš„æ ·å¼ */
.main-title-two-line {
    position: relative;
    max-height: 2.4em; /* å¯¹äºfz-64ï¼Œçº¦ç­‰äº 64px * 1.2 * 2 = 153.6px */
    line-height: 1.2;
    overflow: hidden;
    word-break: break-word;
    /* åˆ é™¤ä»¥ä¸‹å±æ€§ï¼š
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
    text-overflow: ellipsis;
    white-space: normal; */
}

.main-title-two-line::before {
    content: '';
    position: absolute;
    bottom: 0;
    right: 0;
    width: 60px;
    height: 1.2em;
    /* ä½¿ç”¨ä¸æ‚¨èƒŒæ™¯ç›¸ä¼¼çš„é¢œè‰²åˆ›å»ºæ¸å˜é®ç½© */
    background: linear-gradient(
        to right, 
        transparent 0%, 
        rgba(139, 69, 19, 0.8) 40%
    );
    z-index: 1;
}

.main-title-two-line::after {
    content: '...';
    position: absolute;
    bottom: 0;
    right: 0;
    background: linear-gradient(91deg, #FFD8B2 5.06%, #FFF 48.08%, #FFC9A0 97.72%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-family: inherit;
    font-size: inherit;
    line-height: 1.2;
    z-index: 2;
    padding-left: 10px;
}
            </div>
        </div>

        <div class="success">
            <h4>âœ… æ¨èæ–¹æ¡ˆ</h4>
            <p><strong>å»ºè®®ä½¿ç”¨æ–¹æ¡ˆ1ï¼ˆçº¯CSSï¼‰</strong>ï¼Œå› ä¸ºï¼š</p>
            <ul>
                <li>âœ… çº¯CSSå®ç°ï¼Œæ€§èƒ½æ›´å¥½</li>
                <li>âœ… çœç•¥å·å®Œç¾åº•éƒ¨å¯¹é½</li>
                <li>âœ… ä¿æŒåŸæœ‰çš„æ¸å˜æ–‡å­—æ•ˆæœ</li>
                <li>âœ… å…¼å®¹æ€§å¥½ï¼Œç»´æŠ¤ç®€å•</li>
            </ul>
            <p>å¦‚æœæ•ˆæœä¸ç†æƒ³ï¼Œå¯ä»¥å¾®è°ƒ <code>::before</code> ä¼ªå…ƒç´ çš„ <code>background</code> é¢œè‰²æ¥åŒ¹é…æ‚¨çš„å…·ä½“èƒŒæ™¯ã€‚</p>
        </div>

        <div class="warning">
            <h4>ğŸ”§ è°ƒè¯•æç¤º</h4>
            <ul>
                <li>æ ¹æ®å®é™…å­—ä½“å¤§å°è°ƒæ•´ <code>max-height</code> å€¼</li>
                <li>å¦‚æœèƒŒæ™¯å¤æ‚ï¼Œå¯èƒ½éœ€è¦è°ƒæ•´é®ç½©å±‚çš„æ¸å˜è‰²å€¼</li>
                <li>åœ¨ä¸åŒè®¾å¤‡ä¸Šæµ‹è¯•æ•ˆæœï¼Œç¡®ä¿å“åº”å¼å…¼å®¹æ€§</li>
                <li>è€ƒè™‘ä¸ºä¸åŒå­—å·çš„æ ‡é¢˜åˆ›å»ºä¸åŒçš„æ ·å¼ç±»</li>
            </ul>
        </div>
    </div>

    <script>
        // æ¼”ç¤ºJavaScriptæ–¹æ¡ˆ
        document.addEventListener('DOMContentLoaded', function() {
            const jsElements = document.querySelectorAll('.js-method');
            
            jsElements.forEach(function(element) {
                const maxHeight = parseFloat(getComputedStyle(element).maxHeight);
                
                if (element.scrollHeight > maxHeight) {
                    // åˆ›å»ºçœç•¥å·
                    const ellipsis = document.createElement('span');
                    ellipsis.className = 'ellipsis-overlay';
                    ellipsis.textContent = '...';
                    ellipsis.style.display = 'block';
                    element.appendChild(ellipsis);
                    
                    // ç®€åŒ–çš„æ–‡æœ¬æˆªæ–­ï¼ˆå®é™…åº”ç”¨ä¸­éœ€è¦æ›´ç²¾ç¡®çš„ç®—æ³•ï¼‰
                    const originalText = element.textContent.replace('...', '');
                    const truncatedText = originalText.substring(0, originalText.length * 0.7);
                    element.firstChild.textContent = truncatedText;
                }
            });
        });
    </script>
</body>
</html> 